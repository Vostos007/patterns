# Section Splitting - –†–∞–∑–±–∏–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å–µ–∫—Ü–∏–∏

## –ü—Ä–æ–±–ª–µ–º–∞

**–û–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç (–∫–Ω–∏–≥–∞, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è) –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ä–∞–∑–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:**

```
"–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≤—è–∑–∞–Ω–∏—é.pdf"
‚îú‚îÄ‚îÄ –ì–ª–∞–≤–∞ 1: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (—Å–ø–∏—Ü—ã, –∫—Ä—é—á–∫–∏)          ‚Üí TOOL
‚îú‚îÄ‚îÄ –ì–ª–∞–≤–∞ 2: –ü—Ä—è–∂–∞ (–º–æ—Ö–µ—Ä, —à–µ—Ä—Å—Ç—å, —Ö–ª–æ–ø–æ–∫)        ‚Üí YARN
‚îú‚îÄ‚îÄ –ì–ª–∞–≤–∞ 3: –¢–µ—Ö–Ω–∏–∫–∏ (–Ω–∞–±–æ—Ä –ø–µ—Ç–µ–ª—å, —É–±–∞–≤–ª–µ–Ω–∏—è)    ‚Üí TECHNIQUE
‚îú‚îÄ‚îÄ –ì–ª–∞–≤–∞ 4: –£–∑–æ—Ä—ã (–∫–æ—Å—ã, –∞–∂—É—Ä, –∂–∞–∫–∫–∞—Ä–¥)          ‚Üí PATTERN
‚îî‚îÄ‚îÄ –ì–ª–∞–≤–∞ 5: –ü—Ä–æ–µ–∫—Ç—ã (—à–∞—Ä—Ñ, —Å–≤–∏—Ç–µ—Ä, —à–∞–ø–∫–∞)        ‚Üí PROJECT
```

**–ë–µ–∑ —Ä–∞–∑–±–∏–µ–Ω–∏—è –Ω–∞ —Å–µ–∫—Ü–∏–∏:**
- ‚ùå –í–µ—Å—å –¥–æ–∫—É–º–µ–Ω—Ç ‚Üí –æ–¥–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è (GENERAL)
- ‚ùå –ü–æ–∏—Å–∫ "–ø—Ä—è–∂–∞" ‚Üí –≤–µ—Ä–Ω—ë—Ç –≤–µ—Å—å –¥–æ–∫—É–º–µ–Ω—Ç (500 —Å—Ç—Ä–∞–Ω–∏—Ü!)
- ‚ùå RAG –¥–æ–±–∞–≤–∏—Ç –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞—Å—Ç–∏ –∫ –ø—Ä–æ–º–ø—Ç—É

**–° —Ä–∞–∑–±–∏–µ–Ω–∏–µ–º –Ω–∞ —Å–µ–∫—Ü–∏–∏:**
- ‚úÖ –û–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç ‚Üí 50+ —Å–µ–∫—Ü–∏–π —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
- ‚úÖ –ü–æ–∏—Å–∫ "–ø—Ä—è–∂–∞" ‚Üí —Ç–æ–ª—å–∫–æ –≥–ª–∞–≤—ã –æ –ø—Ä—è–∂–µ!
- ‚úÖ RAG –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Å–µ–∫—Ü–∏–∏

---

## –†–µ—à–µ–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ

```python
from kps.knowledge import KnowledgeBase

# –í–∫–ª—é—á–∏—Ç—å —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —Å–µ–∫—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é!)
kb = KnowledgeBase("data/knowledge.db", split_sections=True)

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–Ω–∏–≥—É
kb.ingest_folder("knowledge/")

# –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
# 1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–∑–∞–≥–æ–ª–æ–≤–∫–∏, –≥–ª–∞–≤—ã)
# 2. –†–∞–∑–æ–±—å—ë—Ç –Ω–∞ —Å–µ–∫—Ü–∏–∏
# 3. –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä—É–µ—Ç –∫–∞–∂–¥—É—é —Å–µ–∫—Ü–∏—é –æ—Ç–¥–µ–ª—å–Ω–æ
# 4. –°–æ—Ö—Ä–∞–Ω–∏—Ç —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç

```python
# –ë—ã–ª–æ: 1 —Ñ–∞–π–ª ‚Üí 1 –∑–∞–ø–∏—Å—å
# –°—Ç–∞–ª–æ: 1 —Ñ–∞–π–ª ‚Üí 50+ –∑–∞–ø–∏—Å–µ–π (—Å–µ–∫—Ü–∏–π)

stats = kb.get_statistics()
print(stats)

# {
#   'total_entries': 53,
#   'by_category': {
#     'tool': 5,      # –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
#     'yarn': 8,      # –ü—Ä—è–∂–∞
#     'technique': 12, # –¢–µ—Ö–Ω–∏–∫–∏
#     'pattern': 15,   # –£–∑–æ—Ä—ã
#     'project': 10,   # –ü—Ä–æ–µ–∫—Ç—ã
#     'stitch': 3      # –ü–µ—Ç–ª–∏
#   }
# }
```

---

## –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–∑–±–∏–µ–Ω–∏—è

### SplitStrategy.AUTO (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è!)

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ª—É—á—à—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é:

```python
kb = KnowledgeBase("data/knowledge.db", split_strategy=SplitStrategy.AUTO)
```

**–õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞:**
1. –ï—Å—Ç—å `# ## ###` –∑–∞–≥–æ–ª–æ–≤–∫–∏? ‚Üí MARKDOWN
2. –ï—Å—Ç—å "–ì–ª–∞–≤–∞ 1", "Chapter 2"? ‚Üí CHAPTERS
3. –ï—Å—Ç—å –ó–ê–ì–õ–ê–í–ù–´–ï –ó–ê–ì–û–õ–û–í–ö–ò? ‚Üí HEADINGS
4. –ö–æ—Ä–æ—Ç–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (<3000 —Å–∏–º–≤–æ–ª–æ–≤)? ‚Üí PARAGRAPHS
5. –ò–Ω–∞—á–µ ‚Üí FIXED_SIZE (–ø–æ 2000 —Å–∏–º–≤–æ–ª–æ–≤)

### SplitStrategy.MARKDOWN

–†–∞–∑–±–∏–µ–Ω–∏–µ –ø–æ Markdown –∑–∞–≥–æ–ª–æ–≤–∫–∞–º:

```markdown
# –ì–ª–∞–≤–∞ 1           ‚Üê Level 1
## –†–∞–∑–¥–µ–ª 1.1       ‚Üê Level 2
### –ü–æ–¥—Ä–∞–∑–¥–µ–ª 1.1.1 ‚Üê Level 3
```

**–ü—Ä–∏–º–µ—Ä:**
```python
kb = KnowledgeBase("data/knowledge.db", split_strategy=SplitStrategy.MARKDOWN)
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –§–∞–π–ª—ã `.md` —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
- –≠–∫—Å–ø–æ—Ä—Ç –∏–∑ Notion, Obsidian
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### SplitStrategy.CHAPTERS

–†–∞–∑–±–∏–µ–Ω–∏–µ –ø–æ –≥–ª–∞–≤–∞–º:

```
–ì–ª–∞–≤–∞ 1: –í–≤–µ–¥–µ–Ω–∏–µ
–ì–ª–∞–≤–∞ 2: –û—Å–Ω–æ–≤—ã
Chapter 3: Advanced
–†–∞–∑–¥–µ–ª 4: –ü—Ä–∞–∫—Ç–∏–∫–∞
```

**–ü–∞—Ç—Ç–µ—Ä–Ω—ã:**
- `–ì–ª–∞–≤–∞ N`
- `–ì–õ–ê–í–ê N`
- `Chapter N`
- `–†–∞–∑–¥–µ–ª N`
- `Section N`

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ö–Ω–∏–≥–∏
- –£—á–µ–±–Ω–∏–∫–∏
- –î–ª–∏–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

### SplitStrategy.HEADINGS

–†–∞–∑–±–∏–µ–Ω–∏–µ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º (–∑–∞–≥–ª–∞–≤–Ω—ã–µ –±—É–∫–≤—ã):

```
–ò–ù–°–¢–†–£–ú–ï–ù–¢–´

–°–ø–∏—Ü—ã –±—ã–≤–∞—é—Ç —Ä–∞–∑–Ω—ã–µ...

–ü–†–Ø–ñ–ê

–ú–æ—Ö–µ—Ä - –ª–µ–≥–∫–∞—è –ø—Ä—è–∂–∞...
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –î–æ–∫—É–º–µ–Ω—Ç—ã –±–µ–∑ markdown
- Plain text —Å –ó–ê–ì–õ–ê–í–ù–´–ú–ò –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
- –°—Ç–∞—Ä—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

### SplitStrategy.PARAGRAPHS

–†–∞–∑–±–∏–µ–Ω–∏–µ –ø–æ –∞–±–∑–∞—Ü–∞–º:

```
–ê–±–∑–∞—Ü 1: —Ç–µ–∫—Å—Ç —Ç–µ–∫—Å—Ç —Ç–µ–∫—Å—Ç...

–ê–±–∑–∞—Ü 2: —Ç–µ–∫—Å—Ç —Ç–µ–∫—Å—Ç —Ç–µ–∫—Å—Ç...

–ê–±–∑–∞—Ü 3: —Ç–µ–∫—Å—Ç —Ç–µ–∫—Å—Ç —Ç–µ–∫—Å—Ç...
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ö–æ—Ä–æ—Ç–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã (<3000 —Å–∏–º–≤–æ–ª–æ–≤)
- –ë–µ–∑ —è–≤–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –û–ø–∏—Å–∞–Ω–∏—è —É–∑–æ—Ä–æ–≤

### SplitStrategy.FIXED_SIZE

–†–∞–∑–±–∏–µ–Ω–∏–µ –ø–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É —Ä–∞–∑–º–µ—Ä—É (chunk_size=2000):

```python
kb = KnowledgeBase(
    "data/knowledge.db",
    split_strategy=SplitStrategy.FIXED_SIZE
)
```

**–£–º–Ω–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ:**
- –†–∞–∑—Ä—ã–≤–∞–µ—Ç –ø–æ –≥—Ä–∞–Ω–∏—Ü–∞–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π (–Ω–µ –ø–æ—Å–µ—Ä–µ–¥–∏–Ω–µ!)
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Å–º—ã—Å–ª–∞

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –û—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –±–µ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- Fallback –¥–ª—è –Ω–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞

---

## –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è —Å–µ–∫—Ü–∏–π

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è

–ö–∞–∂–¥–∞—è —Å–µ–∫—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ:

1. **–ó–∞–≥–æ–ª–æ–≤–∫–∞ —Å–µ–∫—Ü–∏–∏**
2. **–°–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ (–ø–µ—Ä–≤—ã–µ 500 —Å–∏–º–≤–æ–ª–æ–≤)**
3. **–ö–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤**

```python
from kps.knowledge.splitter import categorize_section

# –°–µ–∫—Ü–∏—è –ø—Ä–æ —Å–ø–∏—Ü—ã
section = DocumentSection(
    title="–°–ø–∏—Ü—ã –¥–ª—è –≤—è–∑–∞–Ω–∏—è",
    content="–°–ø–∏—Ü—ã –±—ã–≤–∞—é—Ç –∫—Ä—É–≥–æ–≤—ã–µ, –ø—Ä—è–º—ã–µ, —á—É–ª–æ—á–Ω—ã–µ..."
)

category = categorize_section(section)
# ‚Üí KnowledgeCategory.TOOL
```

### –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ |
|-----------|----------------|
| **PATTERN** | —É–∑–æ—Ä, —Å—Ö–µ–º–∞, pattern, chart, –∫–æ—Å–∞, cable, –∞–∂—É—Ä, lace, –∂–∞–∫–∫–∞—Ä–¥ |
| **TECHNIQUE** | —Ç–µ—Ö–Ω–∏–∫, –º–µ—Ç–æ–¥, —Å–ø–æ—Å–æ–±, technique, –≤—è–∑–∞–Ω–∏–µ, knitting, –Ω–∞–±–æ—Ä, casting, —É–±–∞–≤–ª–µ–Ω |
| **YARN** | –ø—Ä—è–∂, –Ω–∏—Ç, yarn, –º–æ—Ö–µ—Ä, —à–µ—Ä—Å—Ç, —Ö–ª–æ–ø–æ–∫, cotton, mohair, wool |
| **TOOL** | —Å–ø–∏—Ü, –∫—Ä—é—á–æ–∫, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, needle, hook, –∫—Ä—É–≥–æ–≤—ã–µ, circular, –º–∞—Ä–∫–µ—Ä |
| **MATERIAL** | –º–∞—Ç–µ—Ä–∏–∞–ª, —Å–æ—Å—Ç–∞–≤, composition, –Ω–∞—Ç—É—Ä–∞–ª—å–Ω, —Å–∏–Ω—Ç–µ—Ç–∏—á |
| **PROJECT** | —à–∞—Ä—Ñ, —Å–≤–∏—Ç–µ—Ä, —à–∞–ø–∫, –Ω–æ—Å–∫, –∏–∑–¥–µ–ª–∏–µ, scarf, sweater, hat, project |
| **STITCH** | –ø–µ—Ç–ª, stitch, –ª–∏—Ü–µ–≤, –∏–∑–Ω–∞–Ω–æ—á–Ω, knit, purl, k2tog, –Ω–∞–∫–∏–¥ |
| **GENERAL** | –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ |

### –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

–ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –≤—Ä—É—á–Ω—É—é:

```python
# –í—Å—è –ø–∞–ø–∫–∞ = –æ–¥–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è
kb.ingest_folder("my_patterns/", category=KnowledgeCategory.PATTERN)

# –í—Å—ë –∏–∑ —ç—Ç–æ–π –ø–∞–ø–∫–∏ –±—É–¥–µ—Ç PATTERN (–±–µ–∑ –∞–≤—Ç–æ-–∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏)
```

---

## –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å–µ–∫—Ü–∏–π

–ö–∞–∂–¥–∞—è —Å–µ–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ:

```python
entry = kb.search("—Å–ø–∏—Ü—ã")[0]

print(entry.metadata)
# {
#   'section_level': 2,           # –£—Ä–æ–≤–µ–Ω—å (1=–≥–ª–∞–≤–∞, 2=—Ä–∞–∑–¥–µ–ª)
#   'section_start': 1250,        # –ü–æ–∑–∏—Ü–∏—è –Ω–∞—á–∞–ª–∞ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ
#   'section_end': 1850,          # –ü–æ–∑–∏—Ü–∏—è –∫–æ–Ω—Ü–∞
#   'parent_section': '–ì–ª–∞–≤–∞ 1',  # –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è —Å–µ–∫—Ü–∏—è
#   'document_title': '–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ'  # –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
# }
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç (–∏–∑ –∫–∞–∫–æ–π –≥–ª–∞–≤—ã?)
- –ü–æ–∫–∞–∑–∞—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—é (—Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ —Å–µ–∫—Ü–∏–∏)
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç—É

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ó–∞–≥—Ä—É–∑–∫–∞ –∫–Ω–∏–≥–∏

```python
from kps.knowledge import KnowledgeBase

kb = KnowledgeBase("data/knowledge.db", split_sections=True)

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–Ω–∏–≥—É "–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≤—è–∑–∞–Ω–∏—é.pdf"
kb.ingest_folder("books/")

# –†–µ–∑—É–ª—å—Ç–∞—Ç: 53 —Å–µ–∫—Ü–∏–∏ –≤–º–µ—Å—Ç–æ 1 –¥–æ–∫—É–º–µ–Ω—Ç–∞!
# –ö–∞–∂–¥–∞—è —Å–µ–∫—Ü–∏—è –≤ —Å–≤–æ–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
```

### –ü—Ä–∏–º–µ—Ä 2: –ü–æ–∏—Å–∫ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

```python
# –ù–∞–π—Ç–∏ —Ç–æ–ª—å–∫–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä—è–∂–µ (–Ω–µ –≤–µ—Å—å –¥–æ–∫—É–º–µ–Ω—Ç!)
results = kb.search("–º–æ—Ö–µ—Ä", category=KnowledgeCategory.YARN)

for entry in results:
    print(f"{entry.title} (–∏–∑ {entry.metadata['document_title']})")
    print(entry.content[:200])
```

### –ü—Ä–∏–º–µ—Ä 3: RAG –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞

```python
# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–≤–æ–¥–∏—Ç: "–ü—Ä–æ–≤—è–∂–∏—Ç–µ –∫–æ—Å—É 2√ó2"

# –ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Å–µ–∫—Ü–∏–π (–Ω–µ –≤—Å–µ–π –∫–Ω–∏–≥–∏!)
context = kb.get_translation_context("–∫–æ—Å–∞ 2√ó2", "ru", "en")

# –ö–æ–Ω—Ç–µ–∫—Å—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —Å–µ–∫—Ü–∏–∏ –ø—Ä–æ –∫–æ—Å—ã:
# - "–ö–æ—Å—ã (Cable pattern)" –∏–∑ –≥–ª–∞–≤—ã 4
# - "–ö–æ—Å–∞ 2√ó2" –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ —É–∑–æ—Ä–æ–≤
#
# –ù–ï —Å–æ–¥–µ—Ä–∂–∏—Ç:
# ‚úó –ì–ª–∞–≤—É –ø—Ä–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
# ‚úó –ì–ª–∞–≤—É –ø—Ä–æ –ø—Ä—è–∂—É
# ‚úó –î—Ä—É–≥–∏–µ —É–∑–æ—Ä—ã
```

### –ü—Ä–∏–º–µ—Ä 4: –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```python
from collections import Counter

# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å–µ–∫—Ü–∏–∏ –∏–∑ –æ–¥–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
all_entries = kb.search("", limit=1000)

doc_entries = [e for e in all_entries if "–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ" in e.source_file]

# –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ
categories = [e.category.value for e in doc_entries]
print(Counter(categories))

# {'pattern': 15, 'technique': 12, 'yarn': 8, 'tool': 5, ...}
```

---

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: –° —Ä–∞–∑–±–∏–µ–Ω–∏–µ–º vs –ë–µ–∑ —Ä–∞–∑–±–∏–µ–Ω–∏—è

### –ë–µ–∑ —Ä–∞–∑–±–∏–µ–Ω–∏—è (split_sections=False)

```python
kb = KnowledgeBase("data/knowledge.db", split_sections=False)
kb.ingest_folder("books/")
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úì 1 —Ñ–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω
  - "–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ.pdf" ‚Üí GENERAL
  - –†–∞–∑–º–µ—Ä: 250KB
  - –í–µ—Å—å –¥–æ–∫—É–º–µ–Ω—Ç –≤ –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏
```

**–ü–æ–∏—Å–∫:**
```python
results = kb.search("–º–æ—Ö–µ—Ä")
# –í–µ—Ä–Ω—ë—Ç –≤–µ—Å—å –¥–æ–∫—É–º–µ–Ω—Ç (250KB!)
# ‚Üí –ù–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞—Å—Ç–∏ –ø–æ–ø–∞–¥—É—Ç –≤ RAG
```

### –° —Ä–∞–∑–±–∏–µ–Ω–∏–µ–º (split_sections=True) ‚≠ê

```python
kb = KnowledgeBase("data/knowledge.db", split_sections=True)
kb.ingest_folder("books/")
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úì 53 —Å–µ–∫—Ü–∏–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ 1 —Ñ–∞–π–ª–∞
  - "–°–ø–∏—Ü—ã" ‚Üí TOOL
  - "–ö—Ä—é—á–∫–∏" ‚Üí TOOL
  - "–ú–æ—Ö–µ—Ä" ‚Üí YARN
  - "–®–µ—Ä—Å—Ç—å –º–µ—Ä–∏–Ω–æ—Å–∞" ‚Üí YARN
  - "–ù–∞–±–æ—Ä –ø–µ—Ç–µ–ª—å" ‚Üí TECHNIQUE
  - "–õ–∏—Ü–µ–≤—ã–µ –ø–µ—Ç–ª–∏" ‚Üí STITCH
  - "–ö–æ—Å—ã" ‚Üí PATTERN
  - "–ê–∂—É—Ä–Ω—ã–π —É–∑–æ—Ä" ‚Üí PATTERN
  - "–ü—Ä–æ—Å—Ç–æ–π —à–∞—Ä—Ñ" ‚Üí PROJECT
  - ... (–µ—â—ë 44 —Å–µ–∫—Ü–∏–∏)
```

**–ü–æ–∏—Å–∫:**
```python
results = kb.search("–º–æ—Ö–µ—Ä")
# –í–µ—Ä–Ω—ë—Ç —Ç–æ–ª—å–∫–æ 2 —Å–µ–∫—Ü–∏–∏:
# 1. "–ú–æ—Ö–µ—Ä" (2KB) - –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä—è–∂–∏
# 2. "–ê–∂—É—Ä–Ω—ã–π —É–∑–æ—Ä '–õ–∏—Å—Ç—å—è'" (1KB) - —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ –º–æ—Ö–µ—Ä–∞
# ‚Üí –¢–æ–ª—å–∫–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–µ –≤ RAG!
```

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ:**

| –ê—Å–ø–µ–∫—Ç | –ë–µ–∑ —Ä–∞–∑–±–∏–µ–Ω–∏—è | –° —Ä–∞–∑–±–∏–µ–Ω–∏–µ–º |
|--------|---------------|--------------|
| –ó–∞–ø–∏—Å–µ–π –≤ –ë–î | 1 | 53 |
| –¢–æ—á–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞ | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–∞—è |
| –†–∞–∑–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ | 250KB | 3KB |
| –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è | GENERAL (–≤—Å—ë) | 8 –∫–∞—Ç–µ–≥–æ—Ä–∏–π |
| RAG –∫–∞—á–µ—Å—Ç–≤–æ | –ù–∏–∑–∫–æ–µ | –í—ã—Å–æ–∫–æ–µ |
| –°–∫–æ—Ä–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞ | –ú–µ–¥–ª–µ–Ω–Ω–æ | –ë—ã—Å—Ç—Ä–æ |

---

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –°–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–∑–±–∏–µ–Ω–∏—è

| –†–∞–∑–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞ | –°–µ–∫—Ü–∏–π | –í—Ä–µ–º—è |
|------------------|--------|-------|
| 10KB (3 —Å—Ç—Ä–∞–Ω–∏—Ü—ã) | 5 | ~20ms |
| 50KB (15 —Å—Ç—Ä–∞–Ω–∏—Ü) | 15 | ~50ms |
| 200KB (60 —Å—Ç—Ä–∞–Ω–∏—Ü) | 50 | ~150ms |
| 1MB (300 —Å—Ç—Ä–∞–Ω–∏—Ü) | 200 | ~600ms |

### –†–∞–∑–º–µ—Ä –ë–î

**–ë–µ–∑ —Ä–∞–∑–±–∏–µ–Ω–∏—è:**
- 100 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ √ó 50KB = 5MB –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- + embeddings (384D √ó 100) = ~150KB
- **–ò—Ç–æ–≥–æ: ~5.2MB**

**–° —Ä–∞–∑–±–∏–µ–Ω–∏–µ–º:**
- 100 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ √ó 50KB = 5MB –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (—Ç–æ—Ç –∂–µ)
- 100 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ ‚Üí 5000 —Å–µ–∫—Ü–∏–π
- + embeddings (384D √ó 5000) = ~7.5MB
- **–ò—Ç–æ–≥–æ: ~12.5MB**

**–í—ã–≤–æ–¥:**
- ‚úÖ –†–∞–∑–º–µ—Ä —Ä–∞—Å—Ç—ë—Ç —É–º–µ—Ä–µ–Ω–Ω–æ (√ó2.4)
- ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ –ø–æ–∏—Å–∫–∞ —Ä–∞—Å—Ç—ë—Ç —Å–∏–ª—å–Ω–æ (√ó10)
- ‚úÖ –¢–æ—á–Ω–æ—Å—Ç—å RAG —Ä–∞—Å—Ç—ë—Ç —Å–∏–ª—å–Ω–æ (√ó10)
- **–†–∞–∑–±–∏–µ–Ω–∏–µ –≤—ã–≥–æ–¥–Ω–æ!**

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### Production

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ split_sections=True** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   ```python
   kb = KnowledgeBase("data/knowledge.db", split_sections=True)
   ```

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ AUTO —Å—Ç—Ä–∞—Ç–µ–≥–∏—é** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   ```python
   kb = KnowledgeBase("data/knowledge.db", split_strategy=SplitStrategy.AUTO)
   ```

3. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏** —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å –∫–∞–∫ —Ä–∞–∑–±–∏–≤–∞—é—Ç—Å—è –¥–æ–∫—É–º–µ–Ω—Ç—ã
   ```python
   import logging
   logging.basicConfig(level=logging.INFO)
   ```

4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
   ```python
   entry = kb.search("query")[0]
   print(f"–°–µ–∫—Ü–∏—è –∏–∑: {entry.metadata['document_title']}")
   print(f"–†–æ–¥–∏—Ç–µ–ª—å: {entry.metadata['parent_section']}")
   ```

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–∑–±–∏–µ–Ω–∏—è

–ï—Å—Ç—å —Å–ª—É—á–∞–∏ –∫–æ–≥–¥–∞ —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–µ –Ω—É–∂–Ω–æ:

```python
# –û—Ç–∫–ª—é—á–∏—Ç—å —Ä–∞–∑–±–∏–µ–Ω–∏–µ
kb = KnowledgeBase("data/knowledge.db", split_sections=False)
```

**–ö–æ–≥–¥–∞ –æ—Ç–∫–ª—é—á–∞—Ç—å:**
- ‚ùå –ö–æ—Ä–æ—Ç–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã (<500 —Å–∏–º–≤–æ–ª–æ–≤)
- ‚ùå –î–æ–∫—É–º–µ–Ω—Ç—ã —É–∂–µ –≤ –æ–¥–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (—Ç–æ–ª—å–∫–æ —É–∑–æ—Ä—ã)
- ‚ùå –§–∞–π–ª—ã –±–µ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (—Å–ø–∏—Å–∫–∏ —Ç–µ—Ä–º–∏–Ω–æ–≤)
- ‚ùå –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ù–û:** –í 95% —Å–ª—É—á–∞–µ–≤ –ª—É—á—à–µ –æ—Å—Ç–∞–≤–∏—Ç—å –≤–∫–ª—é—á–µ–Ω–Ω—ã–º!

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**Section Splitting - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞—è —Ñ–∏—á–∞!**

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–¢–æ—á–Ω–æ—Å—Ç—å:** –ü–æ–∏—Å–∫ –Ω–∞—Ö–æ–¥–∏—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Å–µ–∫—Ü–∏–∏, –Ω–µ –≤–µ—Å—å –¥–æ–∫—É–º–µ–Ω—Ç
‚úÖ **–ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è:** –ö–∞–∂–¥–∞—è —Å–µ–∫—Ü–∏—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
‚úÖ **RAG:** –¢–æ–ª—å–∫–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ –ø—Ä–æ–º–ø—Ç–µ
‚úÖ **–°–∫–æ—Ä–æ—Å—Ç—å:** –ú–µ–Ω—å—à–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –†–∞—Å—Ç—ë—Ç –ª–∏–Ω–µ–π–Ω–æ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
# –ü—Ä–æ—Å—Ç–æ –≤–∫–ª—é—á–∏—Ç–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é!)
kb = KnowledgeBase("data/knowledge.db")

# –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∫–Ω–∏–≥–∏, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
kb.ingest_folder("knowledge/", recursive=True)

# –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
# ‚úì –û–ø—Ä–µ–¥–µ–ª–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É
# ‚úì –†–∞–∑–æ–±—å—ë—Ç –Ω–∞ —Å–µ–∫—Ü–∏–∏
# ‚úì –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä—É–µ—Ç –∫–∞–∂–¥—É—é —Å–µ–∫—Ü–∏—é
# ‚úì –°–æ—Ö—Ä–∞–Ω–∏—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ

# –ì–æ—Ç–æ–≤–æ! üéâ
```

**–û–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç ‚Üí –º–Ω–æ–≥–æ —Å–µ–∫—Ü–∏–π ‚Üí —Ç–æ—á–Ω—ã–π –ø–æ–∏—Å–∫!** üìö‚ú®
