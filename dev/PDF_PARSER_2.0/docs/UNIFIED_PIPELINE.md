# Unified Pipeline - Ğ•Ğ´Ğ¸Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²

## ĞĞ±Ğ·Ğ¾Ñ€

**UnifiedPipeline** - ĞµĞ´Ğ¸Ğ½Ğ°Ñ Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ° Ğ´Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² Ğ¾Ñ‚ A Ğ´Ğ¾ Z.

ĞĞ´Ğ¸Ğ½ pipeline, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ÑĞµÑ‚:
1. âœ… **Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ** - Docling/PyMuPDF (Ğ°Ğ²Ñ‚Ğ¾Ğ²Ñ‹Ğ±Ğ¾Ñ€)
2. âœ… **Ğ¡ĞµĞ³Ğ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ** - ÑƒĞ¼Ğ½Ğ¾Ğµ Ñ€Ğ°Ğ·Ğ±Ğ¸ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ğ±Ğ»Ğ¾ĞºĞ¸
3. âœ… **ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´** - Ñ Ğ³Ğ»Ğ¾ÑÑĞ°Ñ€Ğ¸ĞµĞ¼ + semantic memory + RAG
4. âœ… **QA** - Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ° (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
5. âœ… **Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚** - IDML/JSON/Markdown

## Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚

### ĞŸÑ€Ğ¾ÑÑ‚ĞµĞ¹ÑˆĞµĞµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

```python
from kps.core import UnifiedPipeline

# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ pipeline
pipeline = UnifiedPipeline()

# ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚
result = pipeline.process(
    "document.pdf",
    target_languages=["en", "fr"]
)

# Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾!
print(f"ĞŸĞµÑ€ĞµĞ²ĞµĞ´ĞµĞ½Ğ¾ Ğ½Ğ°: {result.target_languages}")
print(f"Cache hit: {result.cache_hit_rate:.0%}")
print(f"Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ: ${result.translation_cost:.4f}")
```

**Ğ’Ğ¾Ñ‚ Ğ¸ Ğ²ÑÑ‘!** 3 ÑÑ‚Ñ€Ğ¾ĞºĞ¸ ĞºĞ¾Ğ´Ğ° Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ¹ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°.

---

## ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

### Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

```python
from kps.core import (
    UnifiedPipeline,
    PipelineConfig,
    ExtractionMethod,
    MemoryType
)

config = PipelineConfig(
    # Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ
    extraction_method=ExtractionMethod.DOCLING,  # AUTO, DOCLING, PYMUPDF
    use_ocr=False,

    # ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´
    memory_type=MemoryType.SEMANTIC,  # NONE, SIMPLE, SEMANTIC
    memory_path="data/memory.db",
    glossary_path="glossary.yaml",
    enable_few_shot=True,
    enable_auto_suggestions=True,

    # QA
    enable_qa=False,

    # Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚
    export_format="json",  # idml, json, markdown
    style_template="styles.yaml"
)

pipeline = UnifiedPipeline(config)
```

### ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸

#### ExtractionMethod

| ĞœĞµÑ‚Ğ¾Ğ´ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ | Ğ¢Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ |
|-------|----------|----------|----------|
| `AUTO` | ĞĞ²Ñ‚Ğ¾Ğ²Ñ‹Ğ±Ğ¾Ñ€ (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ) | - | - |
| `DOCLING` | AI-powered Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ | ĞœĞµĞ´Ğ»ĞµĞ½Ğ½Ğ¾ | ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾ |
| `PYMUPDF` | Ğ‘Ñ‹ÑÑ‚Ñ€Ğ¾Ğµ Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ | Ğ‘Ñ‹ÑÑ‚Ñ€Ğ¾ | Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾ |

#### MemoryType

| Ğ¢Ğ¸Ğ¿ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | Cache Hit | Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ |
|-----|----------|-----------|---------|
| `NONE` | Ğ‘ĞµĞ· ĞºÑÑˆĞ° | 0% | - |
| `SIMPLE` | JSON ĞºÑÑˆ | 40-50% | Ğ¢Ğ¾Ñ‡Ğ½Ñ‹Ğµ ÑĞ¾Ğ²Ğ¿Ğ°Ğ´ĞµĞ½Ğ¸Ñ |
| `SEMANTIC` | SQLite + embeddings | 65-80% | Ğ¢Ğ¾Ñ‡Ğ½Ñ‹Ğµ + Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ğµ + RAG |

**Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ:** `SEMANTIC` Ğ´Ğ»Ñ Ğ¼Ğ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¹ ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸.

---

## ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

### ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

```
INPUT (PDF/DOCX)
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Ğ˜Ğ—Ğ’Ğ›Ğ•Ğ§Ğ•ĞĞ˜Ğ• (Docling/PyMuPDF)             â”‚
â”‚    - ĞĞ²Ñ‚Ğ¾Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ°                      â”‚
â”‚    - OCR Ğ´Ğ»Ñ ÑĞºĞ°Ğ½Ğ¾Ğ² (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)           â”‚
â”‚    - Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ñ‚ĞµĞºÑÑ‚Ğ°, Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹, ÑÑ‚Ğ¸Ğ»ĞµĞ¹ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Ğ¡Ğ•Ğ“ĞœĞ•ĞĞ¢ĞĞ¦Ğ˜Ğ¯                              â”‚
â”‚    - Ğ Ğ°Ğ·Ğ±Ğ¸ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ğ±Ğ»Ğ¾ĞºĞ¸                     â”‚
â”‚    - ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¸Ğ¿Ğ¾Ğ² (Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº, Ñ‚ĞµĞºÑÑ‚)   â”‚
â”‚    - Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ĞĞŸĞ Ğ•Ğ”Ğ•Ğ›Ğ•ĞĞ˜Ğ• Ğ¯Ğ—Ğ«ĞšĞ                        â”‚
â”‚    - ĞĞ²Ñ‚Ğ¾Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ¸ÑÑ…Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ ÑĞ·Ñ‹ĞºĞ°        â”‚
â”‚    - ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° 50+ ÑĞ·Ñ‹ĞºĞ¾Ğ²                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. ĞŸĞ•Ğ Ğ•Ğ’ĞĞ”                                  â”‚
â”‚    â”œâ”€ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° cache (Ñ‚Ğ¾Ñ‡Ğ½Ñ‹Ğµ + Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ğµ)    â”‚
â”‚    â”œâ”€ ĞŸĞ¾Ğ¸ÑĞº Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ¾Ğ² Ğ³Ğ»Ğ¾ÑÑĞ°Ñ€Ğ¸Ñ             â”‚
â”‚    â”œâ”€ RAG Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ñ‹ (few-shot)               â”‚
â”‚    â”œâ”€ ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´ Ñ‡ĞµÑ€ĞµĞ· Ğ˜Ğ˜                     â”‚
â”‚    â””â”€ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² memory                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. QA ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)                â”‚
â”‚    - Ğ“ĞµĞ¾Ğ¼ĞµÑ‚Ñ€Ğ¸Ñ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ°                    â”‚
â”‚    - Ğ¨Ñ€Ğ¸Ñ„Ñ‚Ñ‹ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ñ‹                       â”‚
â”‚    - Ğ˜Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ Ğ½Ğ° Ğ¼ĞµÑÑ‚Ğ°Ñ…                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. Ğ­ĞšĞ¡ĞŸĞĞ Ğ¢                                  â”‚
â”‚    - IDML (InDesign)                        â”‚
â”‚    - JSON (ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹)               â”‚
â”‚    - Markdown (Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼Ñ‹Ğ¹)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
OUTPUT (translated files)
```

---

## ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

### 1. ĞĞ´Ğ¸Ğ½Ğ¾Ñ‡Ğ½Ñ‹Ğ¹ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚

```python
pipeline = UnifiedPipeline()

result = pipeline.process(
    "document.pdf",
    target_languages=["en"]
)

print(f"âœ“ ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ½Ğ¾: {result.source_file}")
print(f"  Ğ¡ĞµĞ³Ğ¼ĞµĞ½Ñ‚Ğ¾Ğ²: {result.segments_extracted}")
print(f"  Cache hit: {result.cache_hit_rate:.0%}")
print(f"  Ğ’Ñ‹Ñ…Ğ¾Ğ´Ğ½Ğ¾Ğ¹ Ñ„Ğ°Ğ¹Ğ»: {result.output_files['en']}")
```

### 2. ĞŸĞ°ĞºĞµÑ‚Ğ½Ğ°Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°

```python
pipeline = UnifiedPipeline()

files = ["doc1.pdf", "doc2.pdf", "doc3.pdf"]
langs = ["en", "fr"]

for file in files:
    result = pipeline.process(file, langs)
    print(f"âœ“ {file}: {result.cache_hit_rate:.0%} cache")
```

### 3. Ğ¡ semantic memory

```python
config = PipelineConfig(
    memory_type=MemoryType.SEMANTIC,
    memory_path="data/semantic.db",
    enable_few_shot=True
)

pipeline = UnifiedPipeline(config)

# ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´ - ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ±Ğ°Ğ·Ñƒ Ğ·Ğ½Ğ°Ğ½Ğ¸Ğ¹
result1 = pipeline.process("doc1.pdf", ["en"])
print(f"Cache: {result1.cache_hit_rate:.0%}")  # ~10%

# Ğ’Ñ‚Ğ¾Ñ€Ğ¾Ğ¹ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´ - Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ Ğ±Ğ°Ğ·Ñƒ Ğ·Ğ½Ğ°Ğ½Ğ¸Ğ¹
result2 = pipeline.process("doc2.pdf", ["en"])
print(f"Cache: {result2.cache_hit_rate:.0%}")  # ~50%

# Ğ¢Ñ€ĞµÑ‚Ğ¸Ğ¹ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´ - ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¾Ğ±ÑƒÑ‡Ğ¸Ğ»Ğ°ÑÑŒ
result3 = pipeline.process("doc3.pdf", ["en"])
print(f"Cache: {result3.cache_hit_rate:.0%}")  # ~75%
```

### 4. Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¸ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³

```python
pipeline = UnifiedPipeline()

# ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ
result = pipeline.process("document.pdf", ["en", "fr"])

# Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°
print(f"Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ: {result.extraction_method}")
print(f"Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†: {result.pages_extracted}")
print(f"Ğ¡ĞµĞ³Ğ¼ĞµĞ½Ñ‚Ğ¾Ğ²: {result.segments_extracted}")
print(f"Ğ¯Ğ·Ñ‹ĞºĞ¸: {result.target_languages}")
print(f"ĞŸĞµÑ€ĞµĞ²ĞµĞ´ĞµĞ½Ğ¾: {result.segments_translated}")
print(f"Cache hit: {result.cache_hit_rate:.0%}")
print(f"Ğ¢ĞµÑ€Ğ¼Ğ¸Ğ½Ñ‹ Ğ³Ğ»Ğ¾ÑÑĞ°Ñ€Ğ¸Ñ: {result.glossary_terms_found}")
print(f"Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ: ${result.translation_cost:.4f}")
print(f"Ğ’Ñ€ĞµĞ¼Ñ: {result.processing_time:.1f}s")

# Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹
stats = pipeline.get_statistics()
print(f"\nĞ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ°:")
print(f"  Ğ“Ğ»Ğ¾ÑÑĞ°Ñ€Ğ¸Ğ¹: {stats['glossary_terms']} Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ¾Ğ²")
print(f"  Memory: {stats['memory_type']}")
print(f"  Ğ—Ğ°Ğ¿Ğ¸ÑĞµĞ¹: {stats.get('total_entries', 0)}")
```

### 5. ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº

```python
pipeline = UnifiedPipeline()

try:
    result = pipeline.process("document.pdf", ["en"])

    if result.errors:
        print("âš  ĞÑˆĞ¸Ğ±ĞºĞ¸:")
        for error in result.errors:
            print(f"  - {error}")

    if result.warnings:
        print("âš  ĞŸÑ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ñ:")
        for warning in result.warnings:
            print(f"  - {warning}")

except FileNotFoundError:
    print("âœ— Ğ¤Ğ°Ğ¹Ğ» Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½")
except Exception as e:
    print(f"âœ— ĞÑˆĞ¸Ğ±ĞºĞ°: {e}")
```

---

## PipelineResult

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°

```python
@dataclass
class PipelineResult:
    # Input
    source_file: str              # Ğ˜ÑÑ…Ğ¾Ğ´Ğ½Ñ‹Ğ¹ Ñ„Ğ°Ğ¹Ğ»
    source_language: str          # ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ñ‘Ğ½Ğ½Ñ‹Ğ¹ ÑĞ·Ñ‹Ğº

    # Extraction
    extraction_method: str        # ĞœĞµÑ‚Ğ¾Ğ´ Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ñ
    pages_extracted: int          # Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ† Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¾
    segments_extracted: int       # Ğ¡ĞµĞ³Ğ¼ĞµĞ½Ñ‚Ğ¾Ğ² ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¾

    # Translation
    target_languages: List[str]   # Ğ¦ĞµĞ»ĞµĞ²Ñ‹Ğµ ÑĞ·Ñ‹ĞºĞ¸
    segments_translated: int      # Ğ¡ĞµĞ³Ğ¼ĞµĞ½Ñ‚Ğ¾Ğ² Ğ¿ĞµÑ€ĞµĞ²ĞµĞ´ĞµĞ½Ğ¾
    cache_hit_rate: float         # 0.0-1.0
    glossary_terms_found: int     # ĞĞ°Ğ¹Ğ´ĞµĞ½Ğ¾ Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ¾Ğ²
    translation_cost: float       # Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ ($)

    # Output
    output_files: Dict[str, str]  # {lang: filepath}

    # Statistics
    processing_time: float        # Ğ’Ñ€ĞµĞ¼Ñ (ÑĞµĞºÑƒĞ½Ğ´Ñ‹)
    errors: List[str]             # ĞÑˆĞ¸Ğ±ĞºĞ¸
    warnings: List[str]           # ĞŸÑ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ñ
```

---

## ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ

### ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸

| Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ | Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ | Cache Hit | Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ |
|----------|----------|-----------|-----------|
| ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ | ~30 ÑĞµĞº/ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° | 0% | $10 |
| Ğ’Ñ‚Ğ¾Ñ€Ğ¾Ğ¹ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ | ~20 ÑĞµĞº/ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° | 40% | $6 |
| Ğ”ĞµÑÑÑ‚Ñ‹Ğ¹ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ | ~10 ÑĞµĞº/ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° | 70% | $3 |

### ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

**1. Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ° Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ñ:**
- `PYMUPDF` - Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ‹Ñ… PDF (Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾)
- `DOCLING` - Ğ´Ğ»Ñ ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ñ… Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² (Ñ‚Ğ¾Ñ‡Ğ½ĞµĞµ)
- `AUTO` - Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ²Ñ‹Ğ±Ğ¾Ñ€

**2. Semantic Memory:**
- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ embeddings Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ñ…
- Cache hit rate: 65-80% vs 40-50% (simple)
- Ğ­ĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ: +30-40%

**3. Few-Shot Learning:**
- Ğ˜Ğ˜ ÑƒÑ‡Ğ¸Ñ‚ÑÑ Ğ½Ğ° Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰Ğ¸Ñ… Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ°Ñ…
- ĞšĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾: +5-7% Ñ‡ĞµÑ€ĞµĞ· Ğ¼ĞµÑÑÑ†
- ĞšĞ¾Ğ½ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ ÑÑ‚Ğ¸Ğ»Ñ

---

## Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ

### Ğ¡ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¼ ĞºĞ¾Ğ´Ğ¾Ğ¼

```python
# Ğ¡Ñ‚Ğ°Ñ€Ñ‹Ğ¹ ÑĞ¿Ğ¾ÑĞ¾Ğ± (ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ğ¹)
extractor = DoclingExtractor()
data = extractor.extract("doc.pdf")
segmenter = ContentSegmenter()
segments = segmenter.segment(data)
translator = GlossaryTranslator(...)
result = translator.translate(segments, "en")
# ... Ğ¼Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ´Ğ° ...

# ĞĞ¾Ğ²Ñ‹Ğ¹ ÑĞ¿Ğ¾ÑĞ¾Ğ± (Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ¹)
pipeline = UnifiedPipeline()
result = pipeline.process("doc.pdf", ["en"])
# Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾!
```

### API ÑĞµÑ€Ğ²ĞµÑ€

```python
from fastapi import FastAPI, UploadFile
from kps.core import UnifiedPipeline

app = FastAPI()
pipeline = UnifiedPipeline()

@app.post("/translate")
async def translate(file: UploadFile, target_langs: List[str]):
    # Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ»
    filepath = f"/tmp/{file.filename}"
    with open(filepath, "wb") as f:
        f.write(await file.read())

    # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ
    result = pipeline.process(filepath, target_langs)

    # Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚
    return {
        "source_language": result.source_language,
        "cache_hit_rate": result.cache_hit_rate,
        "cost": result.translation_cost,
        "output_files": result.output_files
    }
```

---

## Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¾Ğ²

| ĞÑĞ¿ĞµĞºÑ‚ | Ğ Ğ°Ğ½ÑŒÑˆĞµ (Ğ±ĞµĞ· pipeline) | Ğ¡ĞµĞ¹Ñ‡Ğ°Ñ (UnifiedPipeline) |
|--------|----------------------|--------------------------|
| Ğ¡Ñ‚Ñ€Ğ¾Ğº ĞºĞ¾Ğ´Ğ° | ~50-100 | ~3 |
| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ² | 5-7 Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ñ… | 1 unified |
| ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ | Ğ Ğ°Ğ·Ñ€Ğ¾Ğ·Ğ½ĞµĞ½Ğ½Ğ°Ñ | Ğ•Ğ´Ğ¸Ğ½Ğ°Ñ |
| ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº | Ğ’Ñ€ÑƒÑ‡Ğ½ÑƒÑ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ ÑÑ‚Ğ°Ğ¿ | ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ |
| Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° | Ğ¡Ğ¾Ğ±Ğ¸Ñ€Ğ°Ñ‚ÑŒ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ | Ğ’ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ğ°Ñ |
| Ğ¡Ğ°Ğ¼Ğ¾Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ | ĞĞ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾ | Ğ’ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾ |
| Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ | Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ | ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ°Ñ |

---

## Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸

### Ğ”Ğ»Ñ production

1. **Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ SemanticMemory:**
   ```python
   memory_type=MemoryType.SEMANTIC
   ```
   - Ğ›ÑƒÑ‡ÑˆĞ¸Ğ¹ cache hit rate (65-80%)
   - RAG Ğ´Ğ»Ñ ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ñ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ°
   - Ğ¡Ğ°Ğ¼Ğ¾Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ

2. **Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚Ğµ few-shot learning:**
   ```python
   enable_few_shot=True
   ```
   - ĞšĞ¾Ğ½ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ ÑÑ‚Ğ¸Ğ»Ñ
   - Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğµ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ°

3. **ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€ÑŒÑ‚Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸:**
   ```python
   result = pipeline.process(...)
   log.info(f"Cache: {result.cache_hit_rate:.0%}")
   log.info(f"Cost: ${result.translation_cost:.4f}")
   ```

4. **ĞŸĞ°ĞºĞµÑ‚Ğ½Ğ°Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°:**
   ```python
   # ĞĞ´Ğ¸Ğ½ pipeline Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
   pipeline = UnifiedPipeline()
   for file in files:
       result = pipeline.process(file, langs)
   ```

### Ğ”Ğ»Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸/Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

```python
config = PipelineConfig(
    extraction_method=ExtractionMethod.PYMUPDF,  # Ğ‘Ñ‹ÑÑ‚Ñ€ĞµĞµ
    memory_type=MemoryType.SIMPLE,  # ĞŸÑ€Ğ¾Ñ‰Ğµ
    enable_qa=False  # ĞÑ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ
)
```

---

## Ğ—Ğ°ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ

**UnifiedPipeline** - ÑÑ‚Ğ¾:

âœ… **ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ñ‚Ğ°** - 3 ÑÑ‚Ñ€Ğ¾ĞºĞ¸ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ 100
âœ… **Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ** - Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ñ‚Ğ¾Ğº
âœ… **ĞĞ°Ğ´Ñ‘Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ** - Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ°
âœ… **Ğ­Ñ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ** - semantic memory + RAG
âœ… **Ğ¡Ğ°Ğ¼Ğ¾Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ** - ÑƒĞ»ÑƒÑ‡ÑˆĞ°ĞµÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸
âœ… **ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾ÑÑ‚ÑŒ** - Ğ¾Ñ‚ 1 Ğ´Ğ¾ 1000 Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²

**Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ:** Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ UnifiedPipeline Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ·Ğ°Ğ´Ğ°Ñ‡ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²!

```python
# Ğ’ÑÑ Ğ¼Ğ¾Ñ‰ÑŒ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ Ğ² 3 ÑÑ‚Ñ€Ğ¾ĞºĞ°Ñ…:
from kps.core import UnifiedPipeline

pipeline = UnifiedPipeline()
result = pipeline.process("document.pdf", ["en", "fr"])
```

**ĞŸÑ€Ğ¾ÑÑ‚Ğ¾. Ğ‘Ñ‹ÑÑ‚Ñ€Ğ¾. Ğ­Ñ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾.** ğŸš€
