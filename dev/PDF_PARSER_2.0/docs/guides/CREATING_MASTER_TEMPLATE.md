# –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Å—Ç–µ—Ä-—à–∞–±–ª–æ–Ω–∞ InDesign

> **–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –º–∞—Å—Ç–µ—Ä-—à–∞–±–ª–æ–Ω–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Å—Ç–∏–ª—è–º–∏ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º**

## üìã –û–±–∑–æ—Ä

–ú–∞—Å—Ç–µ—Ä-—à–∞–±–ª–æ–Ω InDesign –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:
- **–®—Ä–∏—Ñ—Ç—ã** –∏ –∏—Ö –Ω–∞—á–µ—Ä—Ç–∞–Ω–∏—è (–∂–∏—Ä–Ω—ã–π, –∫—É—Ä—Å–∏–≤, –æ–±—ã—á–Ω—ã–π)
- **–°—Ç–∏–ª–∏ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤** (–∑–∞–≥–æ–ª–æ–≤–∫–∏, –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç, —Å–ø–∏—Å–∫–∏)
- **–°—Ç–∏–ª–∏ —Å–∏–º–≤–æ–ª–æ–≤** (–≤—ã–¥–µ–ª–µ–Ω–∏–µ, –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä—ã, —á–∏—Å–ª–∞)
- **–°—Ç–∏–ª–∏ –æ–±—ä–µ–∫—Ç–æ–≤** (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Ç–∞–±–ª–∏—Ü—ã, —Å—Ö–µ–º—ã)
- **–¶–≤–µ—Ç–∞** –∏ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è CMYK/RGB
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞** (–ø–æ–ª—è, –∫–æ–ª–æ–Ω–∫–∏, —Å–µ—Ç–∫–∞)

## üéØ –¶–µ–ª—å

–°–æ–∑–¥–∞—Ç—å IDML-—à–∞–±–ª–æ–Ω, –∫–æ—Ç–æ—Ä—ã–π —Å–∏—Å—Ç–µ–º–∞ KPS –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è:
1. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Å—Ç–∏–ª–µ–π –∫ –ø–µ—Ä–µ–≤–µ–¥—ë–Ω–Ω–æ–º—É —Ç–µ–∫—Å—Ç—É
2. –†–∞–∑–º–µ—â–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø—Ä–∏–≤—è–∑–∫–æ–π
3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –≤—Å–µ—Ö —è–∑—ã–∫–∞—Ö

---

## üìù –°–ø–æ—Å–æ–± 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏–∑ YAML

### –®–∞–≥ 1: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

–§–∞–π–ª `templates/indesign/master-template-styles.yaml` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é —Å—Ç–∏–ª–µ–π.

### –®–∞–≥ 2: –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ IDML –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ

```python
from pathlib import Path
from kps.indesign import StyleManager
import xml.etree.ElementTree as ET

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å—Ç–∏–ª–µ–π
styles_yaml = Path("templates/indesign/master-template-styles.yaml")
manager = StyleManager.from_yaml(styles_yaml)

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∏–ª—å –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞
heading_style = manager.get_paragraph_style("Heading1")
print(f"–ó–∞–≥–æ–ª–æ–≤–æ–∫: {heading_style.font_family} {heading_style.size}pt")

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ç–∏–ª—å –∫ –∫–æ–Ω—Ç–µ–Ω—Ç—É
style_ref = manager.get_style_for_content("section_title")
print(f"–°—Ç–∏–ª—å –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Ä–∞–∑–¥–µ–ª–∞: {style_ref}")
# Output: "ParagraphStyle/Heading1"

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Styles.xml –¥–ª—è IDML
styles_xml = manager.generate_styles_xml()
tree = ET.ElementTree(styles_xml)
tree.write("Resources/Styles.xml", encoding="utf-8", xml_declaration=True)
```

---

## üñ•Ô∏è –°–ø–æ—Å–æ–± 2: –°–æ–∑–¥–∞–Ω–∏–µ –≤—Ä—É—á–Ω—É—é –≤ InDesign

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç

1. **–û—Ç–∫—Ä–æ–π—Ç–µ InDesign**
2. **–§–∞–π–ª ‚Üí –ù–æ–≤—ã–π ‚Üí –î–æ–∫—É–º–µ–Ω—Ç**
3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
   - –§–æ—Ä–º–∞—Ç: A4 (210√ó297 –º–º)
   - –û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è: –ö–Ω–∏–∂–Ω–∞—è
   - –ü–æ–ª—è: 22 –º–º —Å–æ –≤—Å–µ—Ö —Å—Ç–æ—Ä–æ–Ω
   - –ö–æ–ª–æ–Ω–∫–∏: 1
   - –°—Ä–µ–¥–Ω–∏–∫: 6 –º–º (–µ—Å–ª–∏ 2 –∫–æ–ª–æ–Ω–∫–∏)

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–∞–∑–æ–≤—É—é —Å–µ—Ç–∫—É

1. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí –£—Å—Ç–∞–Ω–æ–≤–∫–∏ ‚Üí –°–µ—Ç–∫–∏**
2. **–ë–∞–∑–æ–≤–∞—è —Å–µ—Ç–∫–∞:**
   - –ù–∞—á–∞–ª–æ: 22 –º–º (–æ—Ç –≤–µ—Ä—Ö–∞)
   - –®–∞–≥: 12 pt
   - –¶–≤–µ—Ç: –°–≤–µ—Ç–ª–æ-–≥–æ–ª—É–±–æ–π
   - –ü–æ–∫–∞–∑–∞—Ç—å: –≤–∫–ª—é—á–∏—Ç—å

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —à—Ä–∏—Ñ—Ç—ã

#### **–û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç:**
```
–°–µ–º–µ–π—Å—Ç–≤–æ: Source Serif 4 (–∏–ª–∏ Noto Serif)
–ù–∞—á–µ—Ä—Ç–∞–Ω–∏—è:
  - Regular (–æ–±—ã—á–Ω—ã–π)
  - Italic (–∫—É—Ä—Å–∏–≤)
  - Semibold (–ø–æ–ª—É–∂–∏—Ä–Ω—ã–π)
  - Semibold Italic
```

#### **–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```
–°–µ–º–µ–π—Å—Ç–≤–æ: Source Sans 3 (–∏–ª–∏ Noto Sans)
–ù–∞—á–µ—Ä—Ç–∞–Ω–∏—è:
  - Regular
  - Semibold
  - Bold
```

#### **–ú–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π (–∫–æ–¥, –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä—ã):**
```
–°–µ–º–µ–π—Å—Ç–≤–æ: Source Code Pro (–∏–ª–∏ Courier New)
–ù–∞—á–µ—Ä—Ç–∞–Ω–∏—è:
  - Regular
```

### –®–∞–≥ 4: –°–æ–∑–¥–∞–π—Ç–µ —Å—Ç–∏–ª–∏ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤

#### **1. Heading1 (–ó–∞–≥–æ–ª–æ–≤–æ–∫ 1)**

**–ü–∞–Ω–µ–ª—å —Å—Ç–∏–ª–µ–π (F11) ‚Üí –ù–æ–≤—ã–π —Å—Ç–∏–ª—å –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞**

```yaml
–ò–º—è: Heading1

–û—Å–Ω–æ–≤–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã —Å–∏–º–≤–æ–ª–æ–≤:
  –°–µ–º–µ–π—Å—Ç–≤–æ —à—Ä–∏—Ñ—Ç–∞: Source Sans 3
  –ù–∞—á–µ—Ä—Ç–∞–Ω–∏–µ: Semibold
  –ö–µ–≥–ª—å: 18 pt
  –ò–Ω—Ç–µ—Ä–ª–∏–Ω—å—è–∂: 22 pt
  –¢—Ä–µ–∫–∏–Ω–≥: 0
  –¶–≤–µ—Ç: Black

–û—Ç—Å—Ç—É–ø—ã –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã:
  –í—ã–∫–ª—é—á–∫–∞: –í–ª–µ–≤–æ
  –ü–µ—Ä–µ–¥ –∞–±–∑–∞—Ü–µ–º: 12 pt
  –ü–æ—Å–ª–µ –∞–±–∑–∞—Ü–∞: 6 pt

–†–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–æ–∫–∏:
  –ù–µ —Ä–∞–∑—Ä—ã–≤–∞—Ç—å —Å–æ —Å–ª–µ–¥—É—é—â–∏–º: ‚úì
  –ü–µ—Ä–µ–Ω–æ—Å—ã: –í—ã–∫–ª

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:
  –†–µ–≥–∏—Å—Ç—Ä: –ù–æ—Ä–º–∞–ª—å–Ω—ã–π
```

#### **2. Heading2 (–ó–∞–≥–æ–ª–æ–≤–æ–∫ 2)**

```yaml
–ò–º—è: Heading2
–û—Å–Ω–æ–≤–∞–Ω –Ω–∞: Heading1

–û—Å–Ω–æ–≤–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã —Å–∏–º–≤–æ–ª–æ–≤:
  –ö–µ–≥–ª—å: 14 pt
  –ò–Ω—Ç–µ—Ä–ª–∏–Ω—å—è–∂: 18 pt

–û—Ç—Å—Ç—É–ø—ã –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã:
  –ü–µ—Ä–µ–¥ –∞–±–∑–∞—Ü–µ–º: 10 pt
  –ü–æ—Å–ª–µ –∞–±–∑–∞—Ü–∞: 4 pt
```

#### **3. BodyText (–û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç)**

```yaml
–ò–º—è: BodyText

–û—Å–Ω–æ–≤–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã —Å–∏–º–≤–æ–ª–æ–≤:
  –°–µ–º–µ–π—Å—Ç–≤–æ —à—Ä–∏—Ñ—Ç–∞: Source Serif 4
  –ù–∞—á–µ—Ä—Ç–∞–Ω–∏–µ: Regular
  –ö–µ–≥–ª—å: 11 pt
  –ò–Ω—Ç–µ—Ä–ª–∏–Ω—å—è–∂: 14 pt
  –¢—Ä–µ–∫–∏–Ω–≥: 0
  –¶–≤–µ—Ç: Black

–û—Ç—Å—Ç—É–ø—ã –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã:
  –í—ã–∫–ª—é—á–∫–∞: –í–ª–µ–≤–æ
  –ê–±–∑–∞—Ü–Ω—ã–π –æ—Ç—Å—Ç—É–ø: 0 pt (–¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞)
  –ü–µ—Ä–µ–¥ –∞–±–∑–∞—Ü–µ–º: 0 pt
  –ü–æ—Å–ª–µ –∞–±–∑–∞—Ü–∞: 0 pt

–†–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–æ–∫–∏:
  –ü–µ—Ä–µ–Ω–æ—Å—ã: –í–∫–ª
  –ö–æ–º–ø–æ–Ω–æ–≤—â–∏–∫: Adobe World-Ready Paragraph Composer
```

#### **4. BodyTextContinued (–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞)**

```yaml
–ò–º—è: BodyTextContinued
–û—Å–Ω–æ–≤–∞–Ω –Ω–∞: BodyText

–û—Ç—Å—Ç—É–ø—ã –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã:
  –ê–±–∑–∞—Ü–Ω—ã–π –æ—Ç—Å—Ç—É–ø: 1.5 –º–º (4.23 pt)
```

#### **5. MaterialsList (–°–ø–∏—Å–æ–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤)**

```yaml
–ò–º—è: MaterialsList
–û—Å–Ω–æ–≤–∞–Ω –Ω–∞: BodyText

–û—Ç—Å—Ç—É–ø—ã –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã:
  –ü–µ—Ä–µ–¥ –∞–±–∑–∞—Ü–µ–º: 3 pt
  –ü–æ—Å–ª–µ –∞–±–∑–∞—Ü–∞: 3 pt
```

#### **6. GaugeInfo (–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏)**

```yaml
–ò–º—è: GaugeInfo
–û—Å–Ω–æ–≤–∞–Ω –Ω–∞: BodyText

–û—Å–Ω–æ–≤–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã —Å–∏–º–≤–æ–ª–æ–≤:
  –ù–∞—á–µ—Ä—Ç–∞–Ω–∏–µ: Italic

–û—Ç—Å—Ç—É–ø—ã –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã:
  –ü–µ—Ä–µ–¥ –∞–±–∑–∞—Ü–µ–º: 6 pt
  –ü–æ—Å–ª–µ –∞–±–∑–∞—Ü–∞: 6 pt

–ó–∞–ª–∏–≤–∫–∞ –∞–±–∑–∞—Ü–∞:
  –¶–≤–µ—Ç: Paper (–±–µ–ª—ã–π)
```

#### **7. FigureCaption (–ü–æ–¥–ø–∏—Å—å –∫ —Ä–∏—Å—É–Ω–∫—É)**

```yaml
–ò–º—è: FigureCaption

–û—Å–Ω–æ–≤–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã —Å–∏–º–≤–æ–ª–æ–≤:
  –°–µ–º–µ–π—Å—Ç–≤–æ —à—Ä–∏—Ñ—Ç–∞: Source Serif 4
  –ù–∞—á–µ—Ä—Ç–∞–Ω–∏–µ: Italic
  –ö–µ–≥–ª—å: 9 pt
  –ò–Ω—Ç–µ—Ä–ª–∏–Ω—å—è–∂: 12 pt
  –¶–≤–µ—Ç: Dark Gray 60%

–û—Ç—Å—Ç—É–ø—ã –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã:
  –í—ã–∫–ª—é—á–∫–∞: –ü–æ —Ü–µ–Ω—Ç—Ä—É
  –ü–µ—Ä–µ–¥ –∞–±–∑–∞—Ü–µ–º: 4 pt
  –ü–æ—Å–ª–µ –∞–±–∑–∞—Ü–∞: 8 pt
```

#### **8. ListBullet (–ú–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫)**

```yaml
–ò–º—è: ListBullet
–û—Å–Ω–æ–≤–∞–Ω –Ω–∞: BodyText

–û—Ç—Å—Ç—É–ø—ã –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã:
  –û—Ç—Å—Ç—É–ø —Å–ª–µ–≤–∞: 6 –º–º (17.01 pt)
  –ê–±–∑–∞—Ü–Ω—ã–π –æ—Ç—Å—Ç—É–ø: -3 –º–º (-8.5 pt) [–≤–∏—Å—è—á–∏–π]
  –ü–æ—Å–ª–µ –∞–±–∑–∞—Ü–∞: 2 pt

–ú–∞—Ä–∫–µ—Ä—ã –∏ –Ω—É–º–µ—Ä–∞—Ü–∏—è:
  –¢–∏–ø —Å–ø–∏—Å–∫–∞: –ú–∞—Ä–∫–µ—Ä—ã
  –°–∏–º–≤–æ–ª –º–∞—Ä–∫–µ—Ä–∞: ‚Ä¢ (U+2022)
```

#### **9. RowInstruction (–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ä—è–¥–æ–≤)**

```yaml
–ò–º—è: RowInstruction
–û—Å–Ω–æ–≤–∞–Ω –Ω–∞: BodyText

–û—Å–Ω–æ–≤–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã —Å–∏–º–≤–æ–ª–æ–≤:
  –°–µ–º–µ–π—Å—Ç–≤–æ —à—Ä–∏—Ñ—Ç–∞: Source Code Pro
  –ö–µ–≥–ª—å: 10 pt
  –ò–Ω—Ç–µ—Ä–ª–∏–Ω—å—è–∂: 14 pt

–û—Ç—Å—Ç—É–ø—ã –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã:
  –û—Ç—Å—Ç—É–ø —Å–ª–µ–≤–∞: 3 –º–º (8.5 pt)
  –ê–±–∑–∞—Ü–Ω—ã–π –æ—Ç—Å—Ç—É–ø: -3 –º–º (-8.5 pt) [–¥–ª—è –Ω–æ–º–µ—Ä–æ–≤ —Ä—è–¥–æ–≤]
```

### –®–∞–≥ 5: –°–æ–∑–¥–∞–π—Ç–µ —Å—Ç–∏–ª–∏ —Å–∏–º–≤–æ–ª–æ–≤

#### **1. Emphasis (–í—ã–¥–µ–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∏–≤–æ–º)**

```yaml
–ò–º—è: Emphasis

–û—Å–Ω–æ–≤–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã —Å–∏–º–≤–æ–ª–æ–≤:
  –ù–∞—á–µ—Ä—Ç–∞–Ω–∏–µ: Italic
```

#### **2. Strong (–ü–æ–ª—É–∂–∏—Ä–Ω—ã–π)**

```yaml
–ò–º—è: Strong

–û—Å–Ω–æ–≤–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã —Å–∏–º–≤–æ–ª–æ–≤:
  –ù–∞—á–µ—Ä—Ç–∞–Ω–∏–µ: Semibold
```

#### **3. Abbreviation (–ê–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä–∞)**

```yaml
–ò–º—è: Abbreviation

–û—Å–Ω–æ–≤–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã —Å–∏–º–≤–æ–ª–æ–≤:
  –°–µ–º–µ–π—Å—Ç–≤–æ —à—Ä–∏—Ñ—Ç–∞: Source Code Pro
  –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 90%
```

#### **4. Number (–ß–∏—Å–ª–∞)**

```yaml
–ò–º—è: Number

–û—Å–Ω–æ–≤–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã —Å–∏–º–≤–æ–ª–æ–≤:
  –°–µ–º–µ–π—Å—Ç–≤–æ —à—Ä–∏—Ñ—Ç–∞: Source Code Pro

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:
  –ó–∞–ø—Ä–µ—Ç–∏—Ç—å —Ä–∞–∑—Ä—ã–≤: ‚úì
```

### –®–∞–≥ 6: –°–æ–∑–¥–∞–π—Ç–µ —Å—Ç–∏–ª–∏ –æ–±—ä–µ–∫—Ç–æ–≤

#### **1. FigureInline (–í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)**

**–ü–∞–Ω–µ–ª—å —Å—Ç–∏–ª–µ–π –æ–±—ä–µ–∫—Ç–æ–≤ ‚Üí –ù–æ–≤—ã–π —Å—Ç–∏–ª—å –æ–±—ä–µ–∫—Ç–∞**

```yaml
–ò–º—è: FigureInline

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏–≤—è–∑–∫–∏:
  –ü–æ–∑–∏—Ü–∏—è: Inline (–í —Å—Ç—Ä–æ–∫–µ)
  –¢–æ—á–∫–∞ –ø—Ä–∏–≤—è–∑–∫–∏: Top Left (–í–µ—Ä—Ö–Ω–∏–π –ª–µ–≤—ã–π —É–≥–æ–ª)
  –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ: –ü–æ —Ü–µ–Ω—Ç—Ä—É
  –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –æ–ø–æ—Ä–Ω–∞—è —Ç–æ—á–∫–∞: –ë–∞–∑–æ–≤–∞—è –ª–∏–Ω–∏—è

–†–∞–∑–º–µ—Ä—ã:
  –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞: 85% –æ—Ç –∫–æ–ª–æ–Ω–∫–∏

–û–±—Ç–µ–∫–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–º:
  –¢–∏–ø: –ù–µ—Ç
```

#### **2. FigureBlock (–ë–ª–æ—á–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)**

```yaml
–ò–º—è: FigureBlock

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏–≤—è–∑–∫–∏:
  –ü–æ–∑–∏—Ü–∏—è: Anchored (–ü—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–π)
  –¢–æ—á–∫–∞ –ø—Ä–∏–≤—è–∑–∫–∏: Top Center
  –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ: –ü–æ —Ü–µ–Ω—Ç—Ä—É
  –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –æ–ø–æ—Ä–Ω–∞—è —Ç–æ—á–∫–∞: –ö—Ä–∞–π –∫–æ–ª–æ–Ω–∫–∏
  –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –æ–ø–æ—Ä–Ω–∞—è —Ç–æ—á–∫–∞: –ë–∞–∑–æ–≤–∞—è –ª–∏–Ω–∏—è
  –°–º–µ—â–µ–Ω–∏–µ –ø–æ Y: 6 pt

–û–±—Ç–µ–∫–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–º:
  –¢–∏–ø: –ü–æ –≥–∞–±–∞—Ä–∏—Ç–Ω–æ–º—É –±–ª–æ–∫—É
  –û—Ç—Å—Ç—É–ø: 3 pt

–†–∞–∑–º–µ—Ä—ã:
  –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞: 100% –æ—Ç –∫–æ–ª–æ–Ω–∫–∏
```

### –®–∞–≥ 7: –°–æ–∑–¥–∞–π—Ç–µ —Ü–≤–µ—Ç–æ–≤—ã–µ –æ–±—Ä–∞–∑—Ü—ã

**–ü–∞–Ω–µ–ª—å –æ–±—Ä–∞–∑—Ü–æ–≤ (F5) ‚Üí –ù–æ–≤—ã–π –æ–±—Ä–∞–∑–µ—Ü —Ü–≤–µ—Ç–∞**

```yaml
Black:
  –¢–∏–ø: –¢—Ä–∏–∞–¥–Ω—ã–π
  –ú–æ–¥–µ–ª—å: CMYK
  –ó–Ω–∞—á–µ–Ω–∏—è: C=0, M=0, Y=0, K=100

Light Gray 10%:
  –ú–æ–¥–µ–ª—å: CMYK
  –ó–Ω–∞—á–µ–Ω–∏—è: C=0, M=0, Y=0, K=10

Dark Gray 60%:
  –ú–æ–¥–µ–ª—å: CMYK
  –ó–Ω–∞—á–µ–Ω–∏—è: C=0, M=0, Y=0, K=60

Blue:
  –ú–æ–¥–µ–ª—å: CMYK
  –ó–Ω–∞—á–µ–Ω–∏—è: C=100, M=70, Y=0, K=0
```

### –®–∞–≥ 8: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —è–∑—ã–∫–æ–≤—ã–µ —Å–ª–æ–≤–∞—Ä–∏

**–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí –£—Å—Ç–∞–Ω–æ–≤–∫–∏ ‚Üí –°–ª–æ–≤–∞—Ä—å**

```yaml
–Ø–∑—ã–∫–∏:
  - –†—É—Å—Å–∫–∏–π: Russian
  - –ê–Ω–≥–ª–∏–π—Å–∫–∏–π: English: UK
  - –§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π: French

–ö–æ–º–ø–æ–Ω–æ–≤—â–∏–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
  Adobe World-Ready Paragraph Composer
```

### –®–∞–≥ 9: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–∞–∫ IDML-—à–∞–±–ª–æ–Ω

1. **–§–∞–π–ª ‚Üí –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫**
2. **–§–æ—Ä–º–∞—Ç:** InDesign Markup (IDML)
3. **–ò–º—è:** `KPS_Master_Template.idml`
4. **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `templates/indesign/KPS_Master_Template.idml`

---

## üîÑ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ –≤ —Å–∏—Å—Ç–µ–º–µ

### –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∏–ª–µ–π –∏–∑ YAML

```python
from pathlib import Path
from kps.indesign import StyleManager

# –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∏–ª–∏
styles = StyleManager.from_yaml(
    Path("templates/indesign/master-template-styles.yaml")
)

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∏–ª—å –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
content_type = "section_title"
style_ref = styles.get_style_for_content(content_type)
print(f"–°—Ç–∏–ª—å –¥–ª—è '{content_type}': {style_ref}")
# Output: "ParagraphStyle/Heading1"
```

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ

```python
from kps.translation import TranslationSegment
from kps.indesign import IDMLModifier, StyleManager

# –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∏–ª–∏
styles = StyleManager.from_yaml(Path("templates/indesign/master-template-styles.yaml"))

# –°–æ–∑–¥–∞—Ç—å —Å–µ–≥–º–µ–Ω—Ç —Å —Ç–∏–ø–æ–º –∫–æ–Ω—Ç–µ–Ω—Ç–∞
segment = TranslationSegment(
    segment_id="materials_001",
    text="100% —à–µ—Ä—Å—Ç—å –º–µ—Ä–∏–Ω–æ—Å–∞",
    placeholders={},
)

# –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å—Ç–∏–ª—å
block_type = "materials_list"  # –¢–∏–ø –±–ª–æ–∫–∞ –∏–∑ KPS
style_attrs = styles.apply_style_to_block(block_type, language="ru")

print(style_attrs)
# Output:
# {
#   "AppliedParagraphStyle": "ParagraphStyle/MaterialsList",
#   "HyphenationDictionary": "Russian",
#   "Composer": "Adobe World-Ready Paragraph Composer"
# }
```

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫ IDML Story

```python
import xml.etree.ElementTree as ET

# –°–æ–∑–¥–∞—Ç—å ParagraphStyleRange —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Å—Ç–∏–ª–µ–º
para = ET.Element("ParagraphStyleRange")
para.set("AppliedParagraphStyle", style_attrs["AppliedParagraphStyle"])

# –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç
char_range = ET.SubElement(para, "CharacterStyleRange")
char_range.set("AppliedCharacterStyle", "CharacterStyle/$ID/[No character style]")

content = ET.SubElement(char_range, "Content")
content.text = "100% merino wool"

# –†–µ–∑—É–ª—å—Ç–∞—Ç –≤ IDML:
# <ParagraphStyleRange AppliedParagraphStyle="ParagraphStyle/MaterialsList">
#   <CharacterStyleRange AppliedCharacterStyle="...">
#     <Content>100% merino wool</Content>
#   </CharacterStyleRange>
# </ParagraphStyleRange>
```

---

## üìä –ú–∞–ø–ø–∏–Ω–≥ —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω–∞ —Å—Ç–∏–ª–∏

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å—Ç–∏–ª—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞:

```python
# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –≤ master-template-styles.yaml
content_mapping = {
    # –ó–∞–≥–æ–ª–æ–≤–∫–∏
    "section_title": "Heading1",
    "subsection_title": "Heading2",
    "component_title": "Heading3",

    # –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç
    "paragraph": "BodyText",
    "paragraph_first": "BodyTextFirst",
    "paragraph_continued": "BodyTextContinued",

    # –°–ø–∏—Å–∫–∏
    "bullet_list": "ListBullet",
    "numbered_list": "ListNumbered",
    "materials_list": "MaterialsList",

    # –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
    "gauge_info": "GaugeInfo",
    "note": "Note",

    # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
    "row_instruction": "RowInstruction",

    # –ü–æ–¥–ø–∏—Å–∏
    "figure_caption": "FigureCaption",
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```python
# KPS –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –±–ª–æ–∫–∞
block_type = "section_title"  # –ò–∑ –∞–Ω–∞–ª–∏–∑–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∏–ª—å
style = styles.get_style_for_content(block_type)
# ‚Üí "ParagraphStyle/Heading1"

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫ IDML
paragraph.set("AppliedParagraphStyle", style)
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —à–∞–±–ª–æ–Ω–∞

### –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫

- [ ] –í—Å–µ —à—Ä–∏—Ñ—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (Source Serif, Source Sans, Source Code Pro)
- [ ] –°–æ–∑–¥–∞–Ω–æ 9+ —Å—Ç–∏–ª–µ–π –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤
- [ ] –°–æ–∑–¥–∞–Ω–æ 4+ —Å—Ç–∏–ª–µ–π —Å–∏–º–≤–æ–ª–æ–≤
- [ ] –°–æ–∑–¥–∞–Ω–æ 2+ —Å—Ç–∏–ª–µ–π –æ–±—ä–µ–∫—Ç–æ–≤
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã —Ü–≤–µ—Ç–æ–≤—ã–µ –æ–±—Ä–∞–∑—Ü—ã
- [ ] –ë–∞–∑–æ–≤–∞—è —Å–µ—Ç–∫–∞ 12pt
- [ ] –ü–æ–ª—è 22–º–º
- [ ] –Ø–∑—ã–∫–æ–≤—ã–µ —Å–ª–æ–≤–∞—Ä–∏ (RU, EN, FR)
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –∫–∞–∫ IDML

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
from kps.indesign import StyleManager
from pathlib import Path

# –ó–∞–≥—Ä—É–∑–∏—Ç—å —à–∞–±–ª–æ–Ω
styles = StyleManager.from_yaml(
    Path("templates/indesign/master-template-styles.yaml")
)

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö —Å—Ç–∏–ª–µ–π
required_styles = [
    "Heading1", "Heading2", "Heading3",
    "BodyText", "MaterialsList", "FigureCaption"
]

for style_name in required_styles:
    style = styles.get_paragraph_style(style_name)
    if style:
        print(f"‚úì {style_name}: {style.font_family} {style.size}pt")
    else:
        print(f"‚úó {style_name}: –û–¢–°–£–¢–°–¢–í–£–ï–¢!")

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
test_types = ["section_title", "paragraph", "figure_caption"]
for content_type in test_types:
    style_ref = styles.get_style_for_content(content_type)
    if style_ref:
        print(f"‚úì {content_type} ‚Üí {style_ref}")
    else:
        print(f"‚úó {content_type}: –Ω–µ—Ç –º–∞–ø–ø–∏–Ω–≥–∞!")
```

---

## üé® –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞

```xml
<?xml version="1.0" encoding="UTF-8"?>
<Story Self="u123">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ä–∞–∑–¥–µ–ª–∞ -->
    <ParagraphStyleRange AppliedParagraphStyle="ParagraphStyle/Heading1">
        <CharacterStyleRange>
            <Content>Materials</Content>
        </CharacterStyleRange>
    </ParagraphStyleRange>

    <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ–µ) -->
    <ParagraphStyleRange AppliedParagraphStyle="ParagraphStyle/BodyText">
        <CharacterStyleRange>
            <Rectangle Self="u1a3" Label="img-yarn-123"
                       AppliedObjectStyle="ObjectStyle/FigureInline">
                <Image Self="u1a4">
                    <Link AssetURL="file:///assets/yarn.png" />
                </Image>
            </Rectangle>
        </CharacterStyleRange>
    </ParagraphStyleRange>

    <!-- –°–ø–∏—Å–æ–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ -->
    <ParagraphStyleRange AppliedParagraphStyle="ParagraphStyle/MaterialsList">
        <CharacterStyleRange>
            <Content>100% merino wool, 400m/100g</Content>
        </CharacterStyleRange>
    </ParagraphStyleRange>

    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ (–∫—É—Ä—Å–∏–≤) -->
    <ParagraphStyleRange AppliedParagraphStyle="ParagraphStyle/GaugeInfo">
        <CharacterStyleRange>
            <Content>Gauge: 22 sts √ó 30 rows = 4" in stockinette</Content>
        </CharacterStyleRange>
    </ParagraphStyleRange>

    <!-- –ü–æ–¥–ø–∏—Å—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é -->
    <ParagraphStyleRange AppliedParagraphStyle="ParagraphStyle/FigureCaption">
        <CharacterStyleRange>
            <Content>Figure 1: Yarn details</Content>
        </CharacterStyleRange>
    </ParagraphStyleRange>
</Story>
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Materials                           [18pt, Source Sans 3, Semibold]

[–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä—è–∂–∏]                 [–ü—Ä–∏–≤—è–∑–∞–Ω–æ –∫ —Ç–µ–∫—Å—Ç—É]

100% merino wool, 400m/100g         [11pt, Source Serif 4, Regular]

Gauge: 22 sts √ó 30 rows = 4"        [11pt, Source Serif 4, Italic]
in stockinette

        Figure 1: Yarn details      [9pt, Source Serif 4, Italic, —Ü–µ–Ω—Ç—Ä]
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- **YAML –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** `templates/indesign/master-template-styles.yaml`
- **StyleManager:** `kps/indesign/style_manager.py`
- **–ë–∞–∑–æ–≤–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è:** `templates/indesign/style-spec.md`
- **IDML —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:** `kps/indesign/IDML_STRUCTURE.md`

---

## üéØ –ò—Ç–æ–≥

–ú–∞—Å—Ç–µ—Ä-—à–∞–±–ª–æ–Ω –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç:

‚úÖ **–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –Ω–∞ –≤—Å–µ—Ö —è–∑—ã–∫–∞—Ö
‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã** –∏ –Ω–∞—á–µ—Ä—Ç–∞–Ω–∏—è
‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã** –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
‚úÖ **–ü—Ä–∏–≤—è–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** –∫ —Ç–µ–∫—Å—Ç—É
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ** —Å—Ç–∏–ª–µ–π —Å–∏—Å—Ç–µ–º–æ–π KPS

**–î–æ–∫—É–º–µ–Ω—Ç –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º, –∞–Ω–≥–ª–∏–π—Å–∫–æ–º –∏ —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–æ–º –±–µ–∑ —Ä—É—á–Ω–æ–π –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏!** üé®
